webpackJsonp([24],{0:function(s,t,i){i(74);var n=i(1);n(function(){function s(){var s=a.serializeObject();""===n(".reg-tips").text()&&""!==s.password&&""!==s.password1&&""!==s.ccode?e.removeClass("abtn-no"):e.addClass("abtn-no")}function t(s,t){var a=n(s);n.ajax({type:"POST",url:"/captchaa/",data:t,mysuccess:function(s,t){0===s.data.valid?(a.siblings(".pg-tip-icon").removeClass("pg-tip-success"),a.siblings(".reg-tips").html("验证码输入错误，请重新输入。")):1===s.data.valid?a.siblings(".pg-tip-icon").addClass("pg-tip-success"):-1===s.data.valid&&(i(),a.siblings(".reg-tips").html("请重新输入。"),a.siblings(".pg-tip-icon").removeClass("pg-tip-success"))}})}function i(){n.ajax({type:"GET",cache:!1,url:"/captcha/",mysuccess:function(s,t){s.data&&s.data.img&&(n(".ccodepic").attr({src:s.data.img}),a.find("input[name=token]").val(s.data.id))}})}var a=n(".setpasswd"),e=n(".abtn-submit");e.click(function(){var s=a.serializeObject(),t=n.G.getParams(window.location.href);delete s.password1,s.email=t.email,s.code=t.code;var c="/napi/setpasswd/";e.hasClass("abtn-no")||(e.addClass("abtn-no"),n.ajax({url:c,data:s,mysuccess:function(s,t){SUGAR.PopOut.alert('<div class="prompt prompt-success"><h3>密码重置成功！</h3></div>'),setTimeout(function(){window.location.href="/"},1500)}}).always(function(){i(),a[0].reset(),n(".pg-tip-icon").removeClass("pg-tip-success"),e.removeClass("abtn-no")}))}),n(".ccodepic").click(function(){i()}),a.on("blur","input[type=text],input[type=password]",function(){var t=n(this),i=t.attr("name");c[i](this),s()});var c={ccode:function(s){var i=n(s),e=i.val();if(e&&e.length>0){i.siblings(".reg-tips").html("");var c=a.find("input[name=token]").val(),d=a.find("input[name=ccode]").val(),p={token:c,answer:d};t(s,p)}},password:function(s){var t=n(s),i=t.val();i&&i.length>=6&&i.length<=18?(t.closest("td").siblings("td").find(".reg-tips").html(""),t.closest("td").siblings("td").find(".pg-tip-icon").addClass("pg-tip-success"),""===a.find("input[name=password1]").val()||(a.find("input[name=password]").val()!==a.find("input[name=password1]").val()?(a.find("input[name=password1]").closest("td").siblings("td").find(".pg-tip-icon").removeClass("pg-tip-success"),a.find("input[name=password1]").closest("td").siblings("td").find(".reg-tips").html("两次密码不一致")):(a.find("input[name=password1]").closest("td").siblings("td").find(".reg-tips").html(""),a.find("input[name=password1]").closest("td").siblings("td").find(".pg-tip-icon").addClass("pg-tip-success")))):(t.closest("td").siblings("td").find(".reg-tips").html("密码由6-18位字符组成, 区分大小写"),t.closest("td").siblings("td").find(".pg-tip-icon").removeClass("pg-tip-success"))},password1:function(s){var t=n(s),i=t.val();i&&i.length>0&&(a.find("input[name=password]").val()!==a.find("input[name=password1]").val()?(t.closest("td").siblings("td").find(".pg-tip-icon").removeClass("pg-tip-success"),t.closest("td").siblings("td").find(".reg-tips").html("两次密码不一致")):(t.closest("td").siblings("td").find(".reg-tips").html(""),t.closest("td").siblings("td").find(".pg-tip-icon").addClass("pg-tip-success")))}};i()})},74:function(s,t,i){(function(s){i(1);!function(s){s.fn.serializeObject=function(){if(!this.length)return!1;var t=this,i={},n=i;return t.find(':input[type!="checkbox"][type!="radio"], input:checked').each(function(){for(var t=this.name.replace(/\[([^\]]+)?\]/g,",$1").split(","),a=t.length-1,e=0;a>e;e++)n=n[t[e]]=n[t[e]]||(""===t[e+1]?[]:{});void 0!==n.length?n.push(s(this).val()):n[t[a]]=s(this).val(),n=i}),i}}(s)}).call(t,i(1))}});