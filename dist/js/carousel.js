$(function(){$.fn.extend({carousel:function(e){if(!(e&&e.action&&e.eventType))return!1;e=$.extend({time:0,lazyLoadImg:".dt-carousel-img"},e);var a,t,n=$(document),c=$(this),i=$(e.action),s=0|e.time,l=function(a){var t,n,l,d,u;if(i.removeClass("cur"),i.eq(a).addClass("cur"),c.each(function(e,a){l=$(a),l.hasClass("cur")&&(d=l)}),!d)throw new Error("no cur!");if(u=c.eq(a),t=u.find(e.lazyLoadImg),t.length&&(n=t.attr("data-src"),n&&t.css({"background-image":"url("+n+")"})),c.index(d)!==a){switch(e.animateType){case"move":d.removeClass("cur"),u.addClass("cur");var f,m=$(e.carouselWrap);f=0!==a?"-"+a+"00%":"0%",m.stop(!0,!0),m.animate({left:f});break;default:if(e.fadeElement){var v=d.find(e.fadeElement),g=u.find(e.fadeElement);v.stop(!0,!0),g.stop(!0,!0),d.removeClass("cur"),u.addClass("cur"),v.css({display:"block"}).fadeOut(1e3),g.css({display:"none"}).fadeIn(1e3)}else d.stop(!0,!0),u.stop(!0,!0),d.removeClass("cur").css({display:"block"}),u.addClass("cur").css({display:"none"}),d.fadeOut(1e3),u.fadeIn(1e3)}e.callback&&e.callback(a,d,u,o,r)}0!==s&&o()},r=function(){clearTimeout(a)},o=function(){clearTimeout(a),a=setTimeout(function(){var a=$(e.action+".cur"),n=i.index(a[0]);t=n===c.length-1?0:n+1,l(t),o()},s)};e.left&&e.right&&n.delegate(e.left,"click",function(a){var n=$(e.action+".cur"),r=i.index(n[0]);t=0===r?c.length-1:r-1,l(t),0!==s&&o()}).delegate(e.right,"click",function(a){var n=$(e.action+".cur"),r=i.index(n[0]);t=r===c.length-1?0:r+1,l(t),0!==s&&o()}),n.delegate(e.action,e.eventType,function(e){var a=($(this),i.index(this));l(a)}),0!==s&&o()}})});